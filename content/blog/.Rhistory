labs(x = "Life Expectency",
y = NULL,
col = "Year") +
theme_classic() +
theme(legend.position = "top",
axis.line = element_blank(),
axis.ticks = element_blank(),
axis.text = element_blank())
gapminder_life_exp_diff %>%
mutate(country = fct_inorder(country)) %>%
group_by(country) %>%
mutate(max_lifeExp = max(lifeExp),
min_lifeExp = min(lifeExp)) %>%
ungroup() %>%
ggplot() +
geom_segment(aes(x = min_lifeExp, xend = max_lifeExp, y = country, yend = country,
col = continent), alpha = 0.8, size = 7) +
geom_point(aes(x = lifeExp, y = country, col = continent), size = 8) +
geom_text(aes(x = min_lifeExp - .4, y = country, label = paste0(country, ", ", round(min_lifeExp))), col = "grey50", hjust = 1) +
geom_text(aes(x = max_lifeExp + .1, y = country, label = round(max_lifeExp)), col = "grey50", hjust = -1) +
scale_color_brewer(palette = "Pastel2") +
labs(x = "Life Expectency",
y = NULL,
col = "Year") +
theme_classic() +
theme(legend.position = "top",
axis.line = element_blank(),
axis.ticks = element_blank(),
axis.text = element_blank())
gapminder_life_exp_diff %>%
mutate(country = fct_inorder(country)) %>%
group_by(country) %>%
mutate(max_lifeExp = max(lifeExp),
min_lifeExp = min(lifeExp)) %>%
ungroup() %>%
ggplot() +
geom_segment(aes(x = min_lifeExp, xend = max_lifeExp, y = country, yend = country,
col = continent), alpha = 0.8, size = 7) +
geom_point(aes(x = lifeExp, y = country, col = continent), size = 8) +
geom_text(aes(x = min_lifeExp - .4, y = country, label = paste0(country, ", ", round(min_lifeExp))), col = "grey50", hjust = 1) +
geom_text(aes(x = max_lifeExp + .1, y = country, label = round(max_lifeExp)), col = "grey50", hjust = -1) +
scale_color_brewer(palette = "Pastel2") +
labs(x = "Life Expectency",
y = NULL,
col = "Continent") +
theme_classic() +
theme(legend.position = "top",
axis.line = element_blank(),
axis.ticks = element_blank(),
axis.text = element_blank())
gapminder_life_exp_diff %>%
mutate(country = fct_inorder(country)) %>%
group_by(country) %>%
mutate(max_lifeExp = max(lifeExp),
min_lifeExp = min(lifeExp)) %>%
ungroup() %>%
ggplot() +
geom_segment(aes(x = min_lifeExp, xend = max_lifeExp, y = country, yend = country,
col = continent), alpha = 0.8, size = 7) +
geom_point(aes(x = lifeExp, y = country, col = continent), size = 8) +
geom_text(aes(x = min_lifeExp - .5, y = country, label = paste0(country, ", ", round(min_lifeExp))), col = "grey50", hjust = 1) +
geom_text(aes(x = max_lifeExp + .1, y = country, label = round(max_lifeExp)), col = "grey50", hjust = -1) +
scale_color_brewer(palette = "Pastel2") +
labs(x = "Life Expectency",
y = NULL,
col = "Continent") +
theme_classic() +
theme(legend.position = "top",
axis.line = element_blank(),
axis.ticks = element_blank(),
axis.text = element_blank())
gapminder_life_exp_diff %>%
mutate(country = fct_inorder(country)) %>%
group_by(country) %>%
mutate(max_lifeExp = max(lifeExp),
min_lifeExp = min(lifeExp)) %>%
ungroup() %>%
ggplot() +
geom_segment(aes(x = min_lifeExp, xend = max_lifeExp, y = country, yend = country,
col = continent), alpha = 0.8, size = 7) +
geom_point(aes(x = lifeExp, y = country, col = continent), size = 8) +
geom_text(aes(x = min_lifeExp - .6, y = country, label = paste0(country, ", ", round(min_lifeExp))), col = "grey50", hjust = 1) +
geom_text(aes(x = max_lifeExp + .1, y = country, label = round(max_lifeExp)), col = "grey50", hjust = -1) +
scale_color_brewer(palette = "Pastel2") +
labs(x = "Life Expectency",
y = NULL,
col = "Continent") +
theme_classic() +
theme(legend.position = "top",
axis.line = element_blank(),
axis.ticks = element_blank(),
axis.text = element_blank())
gapminder_life_exp_diff %>%
mutate(country = fct_inorder(country)) %>%
group_by(country) %>%
mutate(max_lifeExp = max(lifeExp),
min_lifeExp = min(lifeExp)) %>%
ungroup() %>%
ggplot() +
geom_segment(aes(x = min_lifeExp, xend = max_lifeExp, y = country, yend = country,
col = continent), alpha = 0.5, size = 7) +
geom_point(aes(x = lifeExp, y = country, col = continent), size = 8) +
geom_text(aes(x = min_lifeExp - .6, y = country, label = paste0(country, ", ", round(min_lifeExp))), col = "grey50", hjust = 1) +
geom_text(aes(x = max_lifeExp + .1, y = country, label = round(max_lifeExp)), col = "grey50", hjust = -1) +
scale_color_brewer(palette = "Pastel2") +
labs(x = "Life Expectency",
y = NULL,
col = "Continent") +
theme_classic() +
theme(legend.position = "top",
axis.line = element_blank(),
axis.ticks = element_blank(),
axis.text = element_blank())
gapminder_life_exp_diff %>%
mutate(country = fct_inorder(country)) %>%
group_by(country) %>%
mutate(max_lifeExp = max(lifeExp),
min_lifeExp = min(lifeExp)) %>%
ungroup() %>%
ggplot() +
geom_segment(aes(x = min_lifeExp, xend = max_lifeExp, y = country, yend = country,
col = continent), alpha = 0.5, size = 7) +
geom_point(aes(x = lifeExp, y = country, col = continent), size = 8) +
geom_text(aes(x = min_lifeExp - .6, y = country, label = paste0(country, ", ", round(min_lifeExp))), col = "grey50", hjust = 1) +
geom_text(aes(x = max_lifeExp + .1, y = country, label = round(max_lifeExp)), col = "grey50", hjust = -1) +
scale_color_brewer(palette = "Pastel2") +
labs(title = "Change in life expectency",
subtitle("Between 1952 and 2007")
x = "Life Expectency",
y = NULL,
col = "Continent") +
theme_classic() +
theme(legend.position = "top",
axis.line = element_blank(),
axis.ticks = element_blank(),
axis.text = element_blank())
gapminder_life_exp_diff %>%
mutate(country = fct_inorder(country)) %>%
group_by(country) %>%
mutate(max_lifeExp = max(lifeExp),
min_lifeExp = min(lifeExp)) %>%
ungroup() %>%
ggplot() +
geom_segment(aes(x = min_lifeExp, xend = max_lifeExp, y = country, yend = country,
col = continent), alpha = 0.5, size = 7) +
geom_point(aes(x = lifeExp, y = country, col = continent), size = 8) +
geom_text(aes(x = min_lifeExp - .6, y = country, label = paste0(country, ", ", round(min_lifeExp))), col = "grey50", hjust = 1) +
geom_text(aes(x = max_lifeExp + .1, y = country, label = round(max_lifeExp)), col = "grey50", hjust = -1) +
scale_color_brewer(palette = "Pastel2") +
labs(title = "Change in life expectency",
subtitle("Between 1952 and 2007"),
x = "Life Expectency",
y = NULL,
col = "Continent") +
theme_classic() +
theme(legend.position = "top",
axis.line = element_blank(),
axis.ticks = element_blank(),
axis.text = element_blank())
gapminder_life_exp_diff %>%
mutate(country = fct_inorder(country)) %>%
group_by(country) %>%
mutate(max_lifeExp = max(lifeExp),
min_lifeExp = min(lifeExp)) %>%
ungroup() %>%
ggplot() +
geom_segment(aes(x = min_lifeExp, xend = max_lifeExp, y = country, yend = country,
col = continent), alpha = 0.5, size = 7) +
geom_point(aes(x = lifeExp, y = country, col = continent), size = 8) +
geom_text(aes(x = min_lifeExp - .6, y = country, label = paste0(country, ", ", round(min_lifeExp))), col = "grey50", hjust = 1) +
geom_text(aes(x = max_lifeExp + .1, y = country, label = round(max_lifeExp)), col = "grey50", hjust = -1) +
scale_color_brewer(palette = "Pastel2") +
labs(title = "Change in life expectency",
subtitle = "Between 1952 and 2007",
x = "Life Expectency",
y = NULL,
col = "Continent") +
theme_classic() +
theme(legend.position = "top",
axis.line = element_blank(),
axis.ticks = element_blank(),
axis.text = element_blank())
gapminder_life_exp_diff
gapminder_life_exp_diff
gapminder_life_exp_diff %>% as.data.frame()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
gapminder_life_exp_long %>%
spread(key = "country", value = "lifeExp")
gapminder %>%
filter(country %in% c("Australia", "United States", "Canada")) %>%
select(country, lifeExp) %>%
spread(key = "country", value = "lifeExp")
blogdown::serve_site()
gapminder_life_exp_diff %>%
mutate(country = fct_inorder(country)) %>%
group_by(country) %>%
mutate(max_lifeExp = max(lifeExp),
min_lifeExp = min(lifeExp)) %>%
ungroup() %>%
ggplot() +
geom_segment(aes(x = min_lifeExp, xend = max_lifeExp,
y = country, yend = country,
col = continent), alpha = 0.5, size = 7) +
geom_point(aes(x = lifeExp, y = country, col = continent), size = 8) +
geom_text(aes(x = min_lifeExp, y = country,
label = paste0(country, ", ", round(min_lifeExp))),
col = "grey50", hjust = 1) +
geom_text(aes(x = max_lifeExp, y = country,
label = round(max_lifeExp)),
col = "grey50", hjust = -1) +
scale_color_brewer(palette = "Pastel2") +
labs(title = "Change in life expectency",
subtitle = "Between 1952 and 2007",
x = NULL,
y = NULL,
col = "Continent") +
theme_classic() +
theme(legend.position = "top",
axis.line = element_blank(),
axis.ticks = element_blank(),
axis.text = element_blank())
?geom_Text
long %>%
head
long %>% mutate(country = paste0(country, "_lifeExp")) %>%
spread(key = country,
value = lifeExp) %>%
head
long <- gapminder %>%
filter(country %in% c("Australia", "United States", "Canada"), year > 1970) %>%
select(country, year, lifeExp)
blogdown::stop_server()
long <- gapminder %>%
filter(country %in% c("Australia", "United States", "Canada"), year > 1970) %>%
select(country, year, lifeExp)
long
long <- gapminder %>%
filter(country %in% c("Australia", "United States", "Canada"), year > 1990) %>%
select(country, year, lifeExp)
long
long %>% mutate(country = paste0(country, "_lifeExp")) %>%
spread(key = country,
value = lifeExp) %>%
head
long %>% mutate(country = paste0(country, "_lifeExp")) %>%
spread(key = country,
value = lifeExp) %>%
head
long %>% mutate(country = paste0(country, "_lifeExp")) %>%
spread(key = country,
value = lifeExp)
data <- data.frame(key = c("group1", "group2", "group3"),
value = 1:3)
spread(data, key = "key", value = "value")
data <- data.frame(key = c("group1", "group2", "group3"),
value = 1:3,
other_variable = "misc1", "misc2", "misc3")
spread(data, key = "key", value = "value")
data <- data.frame(key = c("group1", "group2", "group3"),
value = 1:3,
other_variable = c("misc1", "misc2", "misc3"))
spread(data, key = "key", value = "value")
data
data <- data.frame(key = c("group1", "group2", "group3"),
value = 1:3)
data
spread(data, key = "key", value = "value")
long
spread(data, key = "country", value = "lifeExp")
spread(long, key = "country", value = "lifeExp")
spread(long, key = country, value = lifeExp)
gather(wide, key = country, value = lifeExp)
wide <- spread(long, key = country, value = lifeExp)
gather(wide, key = country, value = lifeExp)
wide
wide
gather(wide, key = country, value = lifeExp)
gather(wide, key = country, value = lifeExp, -year)
gapminder_sample_long <- gapminder %>%
filter(country %in% c("Australia", "United States", "Canada"), year > 1990) %>%
select(country, year, lifeExp)
gapminder_sample_long
gapminder_sample_long %>%
spread(key = country, value = lifeExp)
gapminder_sample_long %>%
select(-year) %>%
spread(key = country, value = lifeExp)
gapminder_sample_long %>%
select(-year)
gapminder_sample_wide <- gapminder_sample_long %>%
select(-year) %>%
spread(key = country, value = lifeExp)
gapminder_sample_wide
gapminder_sample_wide <- gapminder_sample_long %>%
spread(key = country, value = lifeExp)
gapminder_sample_wide
gapminder_sample_long %>%
select(-year) %>%
spread(key = country, value = lifeExp)
gapminder_sample_long %>%
select(-year)
gapminder_sample_wide
gapminder_sample_wide %>%
gather(key = country, value = lifeExp)
gapminder_sample_wide %>%
gather(key = country_var, value = lifeExp_var)
gapminder_sample_wide %>%
gather(key = country_var, value = lifeExp_var, -year)
gapminder_sample_long
gapminder_sample_long %>%
unite(country, year, "_")
gapminder_sample_long %>%
unite(country, year, sep = "_")
?unite
gapminder_sample_long %>%
unite("country_year", country, year, sep = "_")
gapminder_sample_long %>%
unite("country_year", country, year, sep = " ")
gapminder_sample_long %>%
unite("country_year", country, year, sep = ".")
?separate
gapminder_sample_long %>%
separate(country, "country1", "country2", sep = " ")
gapminder_sample_united <- gapminder_sample_long %>%
unite("country_year", country, year, sep = ".")
gapminder_sample_united
gapminder_sample_united <- gapminder_sample_long %>%
unite("country_year", country, year, sep = ".")
gapminder_sample_united
gapminder_sample_united %>%
separate(country, "country", "year", sep = ".")
gapminder_sample_united %>%
separate(country_year, "country", "year", sep = ".")
gapminder_sample_united %>%
separate(country_year, "country", "year", sep = "\.")
gapminder_sample_united %>%
separate(country_year, "country", "year", sep = "\\.")
gapminder_sample_united %>%
separate(country_year, "country", "year", sep = ".")
gapminder_sample_united %>%
separate(country_year, c("country", "year"), sep = ".")
df <- data.frame(x = c(NA, "a.b", "a.d", "b.c"))
df %>% separate(x, c("A", "B"))
df
gapminder_sample_united %>%
separate(country_year, c("country", "year"))
gapminder_sample_united %>%
separate(country_year, c("country", "year"), sep = ".")
gapminder_sample_united %>%
separate(country_year, c("country", "year"))
gapminder_sample_united
gapminder_sample_united %>%
separate(country_year, "country", "year")
gapminder_sample_united %>%
separate(country_year, c("country", "year"))
gapminder_sample_united %>%
separate(country_year, c("country", "year"), sep = ".")
gapminder_sample_united <- gapminder_sample_long %>%
unite("countryyear", country, year, sep = "_")
gapminder_sample_united
gapminder_sample_united %>%
separate(countryyear, c("country", "year"), sep = "_")
?drop_na
?fill
?replace_na
str_detect("I like bananas", "banana")
str_locate(fruit, "a")
str_locate("banana", "a")
str_locate_all("banana", "a")
str_subset("bananas are great", "banana")
blogdown::serve_site()
update.packages("tidyr")
vignette("pivot")
hms(8:45:12)
hms("8:45:12')
hms("8:45:12")
mdy_hms("March 13th 2019 at 9:02:00")
mdy_hm("03-13-19, 9:02")
gapminder_life_exp_diff <- gapminder %>%
# filter to the starting and ending years only
filter(year == 1952 | year == 2007) %>%
# ensure that the data are arranged so that 1952 is first and 2007 is second
# within each year
arrange(country, year) %>%
# for country, add a variable corresponding to the difference between life
# expectency in 2007 and 1952
group_by(country) %>%
mutate(lifeExp_diff = lifeExp[2] - lifeExp[1],
# also calculate the largest population for the country (based on the two years)
max_pop = max(pop)) %>%
ungroup() %>%
# arrange in order of the biggest difference in life expectency
arrange(lifeExp_diff) %>%
# restrict to countries with a population of at least 30,000 so we can fit
# the plot in a reasonable space
filter(max_pop > 30000000) %>%
# redefine the country varaible so that it does not have the additional
# country levels corresponding to countries that were removed in the previous
# step
mutate(country = droplevels(country)) %>%
select(country, year, lifeExp, lifeExp_diff)
blogdown::stop_server()
gapminder_life_exp_diff %>%
ggplot() +
geom_point(aes(x = lifeExp, y = country, col = as.factor(year)))
gapminder_life_exp_diff %>%
mutate(country = fct_inorder(country)) %>%
ggplot() +
geom_point(aes(x = lifeExp, y = country, col = as.factor(year)))
gapminder_life_exp_diff %>%
mutate(country = fct_inorder(country)) %>%
# for each country define a varaible for min and max life expectancy
group_by(country) %>%
mutate(max_lifeExp = max(lifeExp),
min_lifeExp = min(lifeExp)) %>%
ungroup() %>%
ggplot() +
# plot a horizontal line from min to max life expectency for each country
geom_segment(aes(x = min_lifeExp, xend = max_lifeExp,
y = country, yend = country,
col = continent), alpha = 0.5, size = 7) +
# add a point for each life expectancy data point
geom_point(aes(x = lifeExp, y = country, col = continent), size = 8) +
# add text of the country name as well as the max and min life expectency
geom_text(aes(x = min_lifeExp + 0.7, y = country,
label = paste(country, round(min_lifeExp))),
col = "grey50", hjust = "right") +
geom_text(aes(x = max_lifeExp - 0.7, y = country,
label = round(max_lifeExp)),
col = "grey50", hjust = "left") +
# choose a different color palette
scale_color_brewer(palette = "Pastel2") +
# set the title
labs(title = "Change in life expectancy",
subtitle = "Between 1952 and 2007",
x = NULL,
y = NULL,
col = "Continent") +
# remove the grey background
theme_classic() +
# remove the axes and move the legend to the top
theme(legend.position = "top",
axis.line = element_blank(),
axis.ticks = element_blank(),
axis.text = element_blank())
blogdown::serve_site()
blogdown::stop_server()
blogdown::serve_site()
blogdown::stop_server()
gapminder_life_exp_diff <- gapminder %>%
# filter to the starting and ending years only
filter(year == 1952 | year == 2007) %>%
# ensure that the data are arranged so that 1952 is first and 2007 is second
# within each year
arrange(country, year) %>%
# for country, add a variable corresponding to the difference between life
# expectency in 2007 and 1952
group_by(country) %>%
mutate(lifeExp_diff = lifeExp[2] - lifeExp[1],
# also calculate the largest population for the country (based on the two years)
max_pop = max(pop)) %>%
ungroup() %>%
# arrange in order of the biggest difference in life expectency
arrange(lifeExp_diff) %>%
# restrict to countries with a population of at least 30,000 so we can fit
# the plot in a reasonable space
filter(max_pop > 30000000) %>%
# redefine the country varaible so that it does not have the additional
# country levels corresponding to countries that were removed in the previous
# step
mutate(country = droplevels(country)) %>%
select(country, year, continent, lifeExp, lifeExp_diff)
gapminder_life_exp_diff %>%
mutate(country = fct_inorder(country)) %>%
# for each country define a varaible for min and max life expectancy
group_by(country) %>%
mutate(max_lifeExp = max(lifeExp),
min_lifeExp = min(lifeExp)) %>%
ungroup() %>%
ggplot() +
# plot a horizontal line from min to max life expectency for each country
geom_segment(aes(x = min_lifeExp, xend = max_lifeExp,
y = country, yend = country,
col = continent), alpha = 0.5, size = 7) +
# add a point for each life expectancy data point
geom_point(aes(x = lifeExp, y = country, col = continent), size = 8) +
# add text of the country name as well as the max and min life expectency
geom_text(aes(x = min_lifeExp + 0.7, y = country,
label = paste(country, round(min_lifeExp))),
col = "grey50", hjust = "right") +
geom_text(aes(x = max_lifeExp - 0.7, y = country,
label = round(max_lifeExp)),
col = "grey50", hjust = "left") +
# choose a different color palette
scale_color_brewer(palette = "Pastel2") +
# set the title
labs(title = "Change in life expectancy",
subtitle = "Between 1952 and 2007",
x = NULL,
y = NULL,
col = "Continent") +
# remove the grey background
theme_classic() +
# remove the axes and move the legend to the top
theme(legend.position = "top",
axis.line = element_blank(),
axis.ticks = element_blank(),
axis.text = element_blank())
blogdown::serve_site()
blogdown::stop_server()
